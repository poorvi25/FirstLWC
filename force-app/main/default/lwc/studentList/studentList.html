<template>
    <lightning-card title="Students List">
        <div class="slds-p-around_medium">

            <!-- SEARCH BAR -->
            <lightning-input 
                type="search"
                placeholder="Search by name, email or class"
                onchange={handleSearchChange}>
            </lightning-input>

            <br/>

            <!-- DATATABLE WITH PAGINATION DATA -->
            <lightning-datatable
                key-field="Id"
                data={paginatedStudents}
                columns={columns}
                onsort={handleSort}
                sorted-by={sortedBy}
                sorted-direction={sortedDirection}
                onrowaction={handleRowAction}>
            </lightning-datatable>

            <!-- PAGINATION -->
            <div class="slds-m-around_medium slds-align_absolute-center">

                <lightning-button 
                    label="Previous" 
                    onclick={previousPage}
                    disabled={isPrevDisabled}>
                </lightning-button>

                <lightning-button 
                    class="slds-m-left_small"
                    label="Next" 
                    onclick={nextPage}
                    disabled={isNextDisabled}>
                </lightning-button>

                <p class="slds-m-left_medium slds-text-heading_small">
                    Page {page} of {totalPages}
                </p>

            </div>

        </div>
    </lightning-card>

    <!-- EDIT MODAL -->
    <template if:true={isEditModalOpen}>
        <section
            role="dialog"
            tabindex="-1"
            class="slds-modal slds-fade-in-open">

            <div class="slds-modal__container">

                <header class="slds-modal__header">
                    <h2 class="slds-text-heading_medium">Edit Student</h2>
                </header>

                <div class="slds-modal__content slds-p-around_medium">

                    <lightning-input 
                        name="Name"
                        label="Full Name"
                        value={editRecord.Name}
                        onchange={handleEditChange}>
                    </lightning-input>

                    <lightning-input 
                        name="Email__c"
                        type="email"
                        label="Email"
                        value={editRecord.Email__c}
                        onchange={handleEditChange}>
                    </lightning-input>

                    <lightning-input 
                        name="Class__c"
                        label="Class"
                        value={editRecord.Class__c}
                        onchange={handleEditChange}>
                    </lightning-input>

                </div>

                <footer class="slds-modal__footer">

                    <lightning-button 
                        variant="neutral" 
                        label="Cancel" 
                        onclick={closeEditModal}>
                    </lightning-button>

                    <lightning-button 
                        variant="brand" 
                        label="Save" 
                        onclick={saveUpdatedRecord}>
                    </lightning-button>

                </footer>

            </div>
        </section>

        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

</template>